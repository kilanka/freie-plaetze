// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                String        @id @default(cuid())
  name              String        @default("")
  email             String        @unique @default("")
  isAdmin           Boolean       @default(false)
  authToken         String?
  authTokenIssuedAt DateTime?
  authTokenRedeemed Boolean       @default(false)
  institutions      Institution[] @relation("Institution_owner")
  providers         Provider[]    @relation("Provider_owner")
}

model InstitutionType {
  id                     String        @id @default(cuid())
  paragraph              String        @unique @default("")
  name                   String        @default("")
  shortName              String        @default("")
  from_Institution_types Institution[] @relation("Institution_types")
}

model Institution {
  id                 String                @id @default(cuid())
  name               String                @default("")
  slug               String                @unique @default("")
  owner              User?                 @relation("Institution_owner", fields: [ownerId], references: [id])
  ownerId            String?               @map("owner")
  provider           Provider?             @relation("Institution_provider", fields: [providerId], references: [id])
  providerId         String?               @map("provider")
  types              InstitutionType[]     @relation("Institution_types")
  createdAt          DateTime              @default(now())
  lastUpdated        DateTime              @updatedAt
  gender             InstitutionGenderType
  ageFrom            Int?
  ageTo              Int?
  arePlacesAvailable Boolean               @default(false)
  street             String                @default("")
  streetNumber       String                @default("")
  zip                String                @default("")
  city               String                @default("")
  positionLat        Float?
  positionLng        Float?
  homepage           String                @default("")
  email              String                @default("")
  phone              String                @default("")
  mobilePhone        String                @default("")
  description        Json                  @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
  descriptionPlain   String                @default("")
  logo_id            String?
  logo_filesize      Int?
  logo_width         Int?
  logo_height        Int?
  logo_extension     String?
  photo_id           String?
  photo_filesize     Int?
  photo_width        Int?
  photo_height       Int?
  photo_extension    String?

  @@index([ownerId])
  @@index([providerId])
}

model Provider {
  id           String        @id @default(cuid())
  name         String        @default("")
  owner        User?         @relation("Provider_owner", fields: [ownerId], references: [id])
  ownerId      String?       @map("owner")
  institutions Institution[] @relation("Institution_provider")
  homepage     String        @default("")
  street       String        @default("")
  streetNumber String        @default("")
  zip          String        @default("")
  city         String        @default("")

  @@index([ownerId])
}

enum InstitutionGenderType {
  mixed
  f
  m
}
